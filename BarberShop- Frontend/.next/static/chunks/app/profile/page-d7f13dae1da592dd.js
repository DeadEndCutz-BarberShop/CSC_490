(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{7576:function(e,i,l){Promise.resolve().then(l.bind(l,7060))},7060:function(e,i,l){"use strict";l.r(i),l.d(i,{default:function(){return C}});var t=l(7437),a=l(2265),r=l(828),n=l(8638),s=l(9704),o=l(1761),d=l(774),A=l(7908),c=l(1897),x=l(4598),u=l(2508),h=l(304),m=l(8031),p=l(6285),v=l(9835),f=l(8129),j=l(1343),g=l(2670),Z=l(5915);let b=[],P=8,w="00";for(let e=0;e<48;e++){let e=P>=12?"PM":"AM",i=P>12?P-12:P;b.push("".concat(i.toString().padStart(2,"0"),":").concat(w," ").concat(e)),"00"==(w="00"===w?"30":"00")&&(P=(P+1)%24)}function C(){var e,i;let[l,P]=(0,a.useState)(!1),w=(0,r.v9)(e=>{var i;return null===(i=e.user)||void 0===i?void 0:i.user}),C=(0,r.v9)(e=>{var i;return null===(i=e.user)||void 0===i?void 0:i.isLoading}),[B,E]=(0,a.useState)(null),[y,N]=(0,a.useState)([]),Q=(0,r.I0)(),I="http://localhost:4000";(0,a.useEffect)(()=>{w||Q((0,n.BT)()),w&&(M("firstName",null==w?void 0:w.firstName),M("lastName",null==w?void 0:w.lastName),M("email",null==w?void 0:w.email),M("phone",null==w?void 0:w.phone),M("location",null==w?void 0:w.location),N(w.availableHours||[]))},[w,Q]);let{register:S,handleSubmit:D,setValue:M,clearErrors:T,control:k,formState:{errors:F}}=(0,g.cI)(),H=async e=>{try{console.log(e);let i=(0,c.e)("access_token"),l=new FormData;l.append("profilePic",null==e?void 0:e.profilePic),l.append("userEmail",null==e?void 0:e.email),await A.Z.post("".concat(I,"/auth/update-user"),{...e,availableHours:y},{headers:{Authorization:"Bearer ".concat(i)}}),(null==e?void 0:e.profilePic)&&await A.Z.post("".concat(I,"/auth/update/profile-pic"),l),P(!1),Q((0,n.BT)())}catch(e){console.error("Error updating user details:",e)}finally{}},W=e=>{let i=e.target.files[0];if(i){let e=new FileReader;e.onloadend=()=>{E(e.result)},M("profilePic",i),e.readAsDataURL(i)}},L=e=>{y.includes(e)?N(y.filter(i=>i!==e)):N([...y,e])};return C?(0,t.jsx)(s.Z,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z,{user:w}),(0,t.jsx)(x.Z,{style:{paddingTop:"30px",paddingBottom:"30px"},maxWidth:"lg",children:(0,t.jsxs)(u.ZP,{container:!0,spacing:4,children:[(0,t.jsx)(u.ZP,{item:!0,width:"100%",children:(0,t.jsxs)(h.Z,{children:[(null==w?void 0:w.profilePic)||B?(0,t.jsx)(m.Z,{src:B||"data:image/jpeg;base64,".concat(null==w?void 0:w.profilePic),alt:"Profile Image",sx:{width:"100%",height:250},variant:"rounded"}):(0,t.jsx)(m.Z,{src:"",alt:"Profile Image",sx:{width:{xs:"100%",md:300},height:250},variant:"rounded"}),l&&(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:W,style:{display:"none"}}),l&&(0,t.jsxs)(p.Z,{variant:"contained",component:"label",sx:{mt:2},children:["Upload Avatar",(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:W,hidden:!0})]})]})}),(0,t.jsxs)(u.ZP,{item:!0,children:[(0,t.jsxs)(h.Z,{children:[(0,t.jsxs)(h.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,t.jsx)(v.Z,{variant:"h4",children:"Profile Details"}),!l&&(0,t.jsx)(h.Z,{children:(0,t.jsx)(p.Z,{variant:"contained",onClick:()=>{P(!0)},children:"Edit"})}),l&&(0,t.jsx)(h.Z,{children:(0,t.jsx)(p.Z,{variant:"outlined",onClick:()=>{P(!1),T(),N(w.availableHours||[]),Q((0,n.BT)())},children:"Cancel"})})]}),(0,t.jsx)(f.Z,{}),(0,t.jsx)(h.Z,{mt:2,children:(0,t.jsx)("form",{onSubmit:D(H),children:(0,t.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(u.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)(j.Z,{fullWidth:!0,label:"First Name",...S("firstName",{required:"First Name is required"}),disabled:!l,error:!!F.firstName,helperText:F.firstName?F.firstName.message:""})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)(j.Z,{fullWidth:!0,label:"Last Name",...S("lastName",{required:"Last Name is required"}),disabled:!l,error:!!F.lastName,helperText:F.lastName?F.lastName.message:""})}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(j.Z,{fullWidth:!0,label:"Email",...S("email",{required:"Email is required"}),disabled:!l,error:!!F.email,helperText:F.email?F.email.message:""})}),(0,t.jsxs)(u.ZP,{item:!0,display:"flex",width:"100%",children:[(0,t.jsx)(g.Qr,{name:"phone",control:k,rules:{validate:e=>(0,Z.Cs)(e,{onlyCountryies:[],excludedCountryies:[],continents:[]})},render:e=>{let{field:{ref:i,value:a,...r},fieldState:n}=e;return(0,t.jsx)(Z.Kr,{...r,value:null!=a?a:"",inputRef:i,helperText:n.invalid?"Tel is invalid":"",error:n.invalid,disabled:!l,placeholder:"+92 300 0012321",sx:{width:"100%"}})}}),(null===(e=F.phone)||void 0===e?void 0:e.message)&&(0,t.jsx)(FormHelperText,{error:!0,sx:{mt:1},children:F.phone.message})]}),(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(j.Z,{...S("location"),fullWidth:!0,id:"location",label:"Location",name:"location",autoComplete:"location",disabled:!l})}),(null==w?void 0:w.role)==="barber"&&(0,t.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,t.jsx)(v.Z,{variant:"h7",children:"Available Hours:"}),(0,t.jsx)(h.Z,{display:"flex",flexWrap:"wrap",sx:{maxHeight:{xs:200,md:"100%"},overflow:"auto",mt:2},children:b.map(e=>(0,t.jsx)(p.Z,{variant:y.includes(e)?"contained":"outlined",sx:{borderRadius:"10%",minWidth:0,margin:"4px"},onClick:()=>L(e),disabled:!l,children:e},e))})]}),l&&(0,t.jsx)(u.ZP,{item:!0,xs:12,mt:3,children:(0,t.jsx)(p.Z,{variant:"contained",type:"submit",sx:{mr:2},children:"Save"})})]})})})]}),(null==w?void 0:w.role)==="barber"&&(0,t.jsxs)(h.Z,{mt:4,children:[(0,t.jsx)(v.Z,{variant:"h4",children:"Services"}),(0,t.jsx)(h.Z,{display:"flex",flexDirection:"column",gap:"20px",mt:"10px",flexWrap:"wrap",children:null==w?void 0:null===(i=w.services)||void 0===i?void 0:i.map(e=>(0,t.jsx)(d.Z,{service:e},e.id))})]})]})]})})]})}},774:function(e,i,l){"use strict";l.d(i,{Z:function(){return c}});var t=l(7437),a=l(304),r=l(5195),n=l(3340),s=l(5996),o=l(9835);l(2265);var d=l(703),A=l(8145);function c(e){let{service:i}=e;return(0,t.jsx)(a.Z,{sx:{width:"100%",bgcolor:"white",transition:"transform 0.3s ease-in-out",textDecoration:"none","&:hover":{transform:"scale(1.02)"}},children:(0,t.jsxs)(r.Z,{sx:{display:"flex",alignItems:{xs:"",md:"center"},flexDirection:{xs:"column",sm:"row"}},children:[(null==i?void 0:i.servicePic)?(0,t.jsx)(n.Z,{title:"Barber's Profile Picture",image:"data:image/jpeg;base64,".concat(null==i?void 0:i.servicePic),sx:{backgroundSize:"cover",height:"200px",width:"400px"}}):(0,t.jsx)(d.default,{alt:"Default ",src:A.Z,width:400,height:200,objectFit:"cover"}),(0,t.jsxs)(s.Z,{sx:{flex:"1 0 auto",display:"flex",flexDirection:"column",gap:"5px"},children:[(0,t.jsx)(o.Z,{component:"div",variant:"h5",children:null==i?void 0:i.title}),(0,t.jsx)(o.Z,{variant:"subtitle1",color:"text.secondary",component:"div",children:null==i?void 0:i.description}),(0,t.jsx)(o.Z,{component:"div",variant:"h6",children:null==i?void 0:i.price}),(0,t.jsx)(a.Z,{sx:{display:"flex",alignItems:"center",gap:"5px",mt:"5px"}})]})]})})}},8145:function(e,i){"use strict";i.Z={src:"/_next/static/media/dummyservice.e552a8e8.jpg",height:2339,width:3508,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAUACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAABQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAJwj/8QAHBAAAgICAwAAAAAAAAAAAAAAAgMBBAASBRRh/9oACAEBAAE/ALXPWAZKlrAS62+/s5//xAAYEQACAwAAAAAAAAAAAAAAAAAAAQMSMf/aAAgBAgEBPwCJKuH/xAAZEQABBQAAAAAAAAAAAAAAAAABAAMSIUH/2gAIAQMBAT8AeJkLxf/Z",blurWidth:8,blurHeight:5}}},function(e){e.O(0,[106,470,565,688,174,181,546,508,929,563,747,971,69,744],function(){return e(e.s=7576)}),_N_E=e.O()}]);