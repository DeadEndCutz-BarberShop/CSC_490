(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7782:function(e,r,i){Promise.resolve().then(i.bind(i,240)),Promise.resolve().then(i.bind(i,1801)),Promise.resolve().then(i.t.bind(i,3385,23))},5549:function(e,r,i){"use strict";var t=i(891);r.Z=void 0;var s=t(i(9438)),a=i(7437);r.Z=(0,s.default)((0,a.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn")},240:function(e,r,i){"use strict";i.r(r),i.d(r,{boxClasses:function(){return s.Z},default:function(){return t.Z}});var t=i(304),s=i(1977)},3340:function(e,r,i){"use strict";i.d(r,{Z:function(){return b}});var t=i(444),s=i(2110),a=i(2265),n=i(3167),o=i(6860),l=i(3043),d=i(8836),c=i(8399),u=i(7520);function p(e){return(0,u.ZP)("MuiCardMedia",e)}(0,c.Z)("MuiCardMedia",["root","media","img"]);var m=i(7437);let x=["children","className","component","image","src","style"],h=e=>{let{classes:r,isMediaComponent:i,isImageComponent:t}=e;return(0,o.Z)({root:["root",i&&"media",t&&"img"]},p,r)},v=(0,d.ZP)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:i}=e,{isMediaComponent:t,isImageComponent:s}=i;return[r.root,t&&r.media,s&&r.img]}})(e=>{let{ownerState:r}=e;return(0,s.Z)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},r.isMediaComponent&&{width:"100%"},r.isImageComponent&&{objectFit:"cover"})}),f=["video","audio","picture","iframe","img"],g=["picture","img"];var b=a.forwardRef(function(e,r){let i=(0,l.Z)({props:e,name:"MuiCardMedia"}),{children:a,className:o,component:d="div",image:c,src:u,style:p}=i,b=(0,t.Z)(i,x),j=-1!==f.indexOf(d),Z=!j&&c?(0,s.Z)({backgroundImage:'url("'.concat(c,'")')},p):p,y=(0,s.Z)({},i,{component:d,isMediaComponent:j,isImageComponent:-1!==g.indexOf(d)}),S=h(y);return(0,m.jsx)(v,(0,s.Z)({className:(0,n.Z)(S.root,o),as:d,role:!j&&c?"img":void 0,ref:r,style:Z,ownerState:y,src:j?c||u:void 0},b,{children:a}))})},6635:function(e,r,i){"use strict";i.d(r,{B:function(){return s}});var t=i(3407);let s=(e,r)=>(0,t.toast)(e,{type:r,position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!0,theme:"light",transition:t.Bounce})},1801:function(e,r,i){"use strict";i.r(r),i.d(r,{default:function(){return $}});var t=i(7437),s=i(2265),a=i(1761),n=i(8638),o=i(828),l=i(9704),d=i(4598),c=i(304),u=i(6285),p=i(2508),m=i(5195),x=i(3340),h=i(5996),v=i(9835);i(9083);var f=i(5549),g=i(8792);function b(e){let{barber:r}=e;return(0,t.jsx)(p.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,t.jsx)(c.Z,{m:1,position:"relative",children:(0,t.jsxs)(m.Z,{component:g.default,href:"barber/".concat(r.id),sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.3s ease-in-out",textDecoration:"none",cursor:"pointer","&:hover":{transform:"scale(1.05)"},":active":{transform:"scale(0.90)"}},children:[(null==r?void 0:r.profilePic)?(0,t.jsx)(x.Z,{style:{paddingTop:"56.25%"},title:"Barber's Profile Picture",image:"data:image/jpeg;base64,".concat(r.profilePic),sx:{backgroundSize:"contain"}}):(0,t.jsx)(x.Z,{style:{paddingTop:"56.25%"},title:"Default Profile Icon",image:"./dummyuser.png",sx:{backgroundSize:"contain"}}),(0,t.jsxs)(h.Z,{style:{flexGrow:1},children:[(0,t.jsxs)(v.Z,{gutterBottom:!0,variant:"h5",component:"h2",children:[(null==r?void 0:r.firstName)||"Barber"," ",null==r?void 0:r.lastName]}),(0,t.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",gap:"5px",mt:"10px"},children:[(0,t.jsx)(f.Z,{}),(0,t.jsx)(c.Z,{sx:{fontWeight:400,fontSize:"14px",mt:"3px",textTransform:"uppercase"},children:(null==r?void 0:r.location)||"Not Set"})]})]})]})})})}var j=i(2670),Z=i(1343),y=i(3361);i(3407);var S=i(7908),P=i(1897),C=i(6635);let B={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"100%",sm:500,md:600},height:{xs:"100%",sm:"auto"},bgcolor:"background.paper",border:"1px solid #000",boxShadow:24,p:4};function w(e){let{open:r,handleClose:i}=e,{register:a,handleSubmit:l,reset:d,setError:p,formState:{errors:m}}=(0,j.cI)(),[x,h]=s.useState(!1),f=(0,o.I0)(),g=async e=>{var r,t,s,a,o;h(!0);let l=(0,P.e)("access_token");try{let t=await S.Z.post("".concat("http://localhost:4000","/auth/add-barber"),e,{headers:{Authorization:"Bearer ".concat(l)}});(0,C.B)((null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.message)||"Barber added successfully","success"),d(),i(),f((0,n.d1)())}catch(e){if(e.response&&401===e.response.status){let r=(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Unauthorized";"Barber already exists"===r&&((0,C.B)("Barber already exists","error"),p("email",{type:"custom",message:r}))}else(0,C.B)(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message,"error")}finally{h(!1)}};return(0,t.jsx)(y.Z,{open:r,onClose:i,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,t.jsxs)(c.Z,{sx:B,children:[(0,t.jsx)(v.Z,{variant:"h5",children:"Create Barber"}),(0,t.jsx)(c.Z,{fontSize:"26px",position:"absolute",top:"20px",right:"20px",onClick:i,sx:{cursor:"pointer"},children:"x"}),(0,t.jsxs)("form",{onSubmit:l(g),children:[(0,t.jsx)(Z.Z,{...a("firstName",{required:"First Name is required"}),autoComplete:"given-name",name:"firstName",fullWidth:!0,type:"text",label:"First Name",autoFocus:!0,error:!!m.firstName,helperText:m.firstName?m.firstName.message:"",sx:{mt:2}}),(0,t.jsx)(Z.Z,{...a("lastName",{required:"Last Name is required"}),fullWidth:!0,type:"text",label:"Last Name",name:"lastName",error:!!m.lastName,helperText:m.lastName?m.lastName.message:"",sx:{mt:2}}),(0,t.jsx)(Z.Z,{label:"Email",type:"email",fullWidth:!0,margin:"normal",...a("email",{required:"Email is required"}),error:!!m.email,helperText:m.email?m.email.message:""}),(0,t.jsx)(Z.Z,{label:"Password",fullWidth:!0,margin:"normal",type:"password",...a("password",{minLength:{value:6,message:"Password must be at least 6 characters long"},required:"Password is required"}),error:!!m.password,helperText:m.password?m.password.message:""}),(0,t.jsx)(u.Z,{type:"submit",variant:"contained",color:"primary",sx:{marginTop:"20px"},disabled:x,children:"Add Barber"})]})]})})}function N(e){let{isLoading:r,user:i}=e,[a,m]=s.useState(!1),x=()=>m(!0),h=(0,o.I0)(),v=(0,o.v9)(e=>e.user.barbers);return((0,s.useEffect)(()=>{i&&h((0,n.d1)())},[i]),r)?(0,t.jsx)(l.Z,{}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(d.Z,{style:{paddingTop:"64px",paddingBottom:"64px"},maxWidth:"2xl",children:[(0,t.jsx)(c.Z,{display:"flex",justifyContent:"end",mb:"20px",children:(0,t.jsx)(u.Z,{variant:"contained",onClick:x,children:"Create Barber"})}),(0,t.jsx)(w,{open:a,handleClose:()=>m(!1),handleOpen:x}),(0,t.jsx)(p.ZP,{container:!0,spacing:4,children:null==v?void 0:v.map(e=>(0,t.jsx)(b,{barber:e},e.id))})]})})}function k(e){let{isLoading:r,user:i}=e,[a,c]=s.useState(!1),u=(0,o.I0)(),m=(0,o.v9)(e=>e.user.barbers);return((0,s.useEffect)(()=>{i&&u((0,n.d1)())},[i]),r)?(0,t.jsx)(l.Z,{}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(d.Z,{style:{paddingTop:"64px",paddingBottom:"64px"},maxWidth:"2xl",children:[(0,t.jsx)(w,{open:a,handleClose:()=>c(!1),handleOpen:()=>c(!0)}),(0,t.jsx)(p.ZP,{container:!0,spacing:4,children:null==m?void 0:m.map(e=>(0,t.jsx)(b,{barber:e},e.id))})]})})}var T=i(444),z=i(2110),E=i(3167),I=i(6860),q=i(8836),M=i(3043),W=i(8399),A=i(7520);function F(e){return(0,A.ZP)("MuiCardActions",e)}(0,W.Z)("MuiCardActions",["root","spacing"]);let O=["disableSpacing","className"],D=e=>{let{classes:r,disableSpacing:i}=e;return(0,I.Z)({root:["root",!i&&"spacing"]},F,r)},L=(0,q.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:i}=e;return[r.root,!i.disableSpacing&&r.spacing]}})(e=>{let{ownerState:r}=e;return(0,z.Z)({display:"flex",alignItems:"center",padding:8},!r.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})}),R=s.forwardRef(function(e,r){let i=(0,M.Z)({props:e,name:"MuiCardActions"}),{disableSpacing:s=!1,className:a}=i,n=(0,T.Z)(i,O),o=(0,z.Z)({},i,{disableSpacing:s}),l=D(o);return(0,t.jsx)(L,(0,z.Z)({className:(0,E.Z)(l.root,a),ownerState:o,ref:r},n))});function _(e){let{service:r,handlerEditService:i}=e;return(0,t.jsx)(p.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,t.jsx)(c.Z,{m:1,position:"relative",children:(0,t.jsxs)(m.Z,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.3s ease-in-out",textDecoration:"none",cursor:"pointer","&:hover":{transform:"scale(1.05)"}},children:[(null==r?void 0:r.servicePic)?(0,t.jsx)(x.Z,{style:{paddingTop:"56.25%"},title:"Barber's Profile Picture",image:"data:image/jpeg;base64,".concat(r.servicePic),sx:{backgroundSize:"cover"}}):(0,t.jsx)(x.Z,{style:{paddingTop:"56.25%"},title:"Default Profile Icon",image:"./dummyuser.png",sx:{backgroundSize:"contain"}}),(0,t.jsxs)(h.Z,{style:{flexGrow:1},children:[(0,t.jsx)(v.Z,{gutterBottom:!0,variant:"h5",component:"h2",children:null==r?void 0:r.title}),(0,t.jsx)(c.Z,{sx:{fontWeight:400,fontSize:"14px",mt:"3px",textTransform:"uppercase"},children:null==r?void 0:r.description}),(0,t.jsxs)(c.Z,{sx:{fontWeight:400,fontSize:"14px",mt:"3px",textTransform:"uppercase"},children:["$",null==r?void 0:r.price]})]}),(0,t.jsx)(R,{children:(0,t.jsx)(u.Z,{size:"small",color:"primary",onClick:()=>{i(r)},children:"Edit"})})]})})})}var U=i(8031);let G={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"100%",sm:500,md:600},height:{xs:"100%",sm:"auto"},bgcolor:"background.paper",border:"1px solid #000",boxShadow:24,p:4};function Q(e){let{open:r,handleClose:i,service:a}=e,{register:l,handleSubmit:d,reset:p,setError:m,watch:x,setValue:h,formState:{errors:f}}=(0,j.cI)({}),[g,b]=s.useState(null),[B,w]=s.useState(!1),N="http://localhost:4000",k=(0,o.I0)(),T=x("servicePic");s.useEffect(()=>{a?Object.keys(a).forEach(e=>{void 0!==a[e]&&"id"!==e&&"servicePic"!==e&&h(e,a[e])}):(h("title",""),h("description",""),h("price",""))},[a]),s.useEffect(()=>{if(null==T?void 0:T.length){let e=new FileReader;e.onloadend=()=>{b(e.result)},e.readAsDataURL(T[0])}else b(null)},[T]);let z=async e=>{var r,t,s;w(!0);let o=(0,P.e)("access_token"),l="".concat(N,"/services/add-service"),d="Service added successfully",c=new FormData;c.append("servicePic",null==e?void 0:e.servicePic[0]),a&&(l="".concat(N,"/services/update-service/").concat(a.id),d="Service updated successfully");try{let t=await S.Z.post(l,{...e,price:parseInt(null==e?void 0:e.price)},{headers:{Authorization:"Bearer ".concat(o)}});c.append("service_id",null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.id),(null==e?void 0:e.servicePic[0])&&await S.Z.post("".concat(N,"/services/update/service-pic"),c,{headers:{Authorization:"Bearer ".concat(o)}}),(0,C.B)(t.data.message||d,"success"),p(),i(),k((0,n.Qz)())}catch(r){let e=(null==r?void 0:null===(s=r.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Error";(0,C.B)(e,"error")}finally{w(!1)}};return(0,t.jsx)(y.Z,{open:r,onClose:i,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,t.jsxs)(c.Z,{sx:G,children:[(0,t.jsx)(v.Z,{variant:"h5",children:a?"Edit Service":"Add Service"}),(0,t.jsx)(c.Z,{fontSize:"26px",position:"absolute",top:"20px",right:"20px",onClick:i,sx:{cursor:"pointer"},children:"x"}),(0,t.jsxs)("form",{onSubmit:d(z),children:[(0,t.jsx)(v.Z,{variant:"body1",fontWeight:500,mt:"15px",children:"Service picture:"}),(0,t.jsxs)(c.Z,{sx:{position:"relative",marginBottom:1},children:[(0,t.jsx)("input",{type:"file",...l("servicePic",{}),accept:"image/*",style:{display:"none"},id:"servicePic"}),(0,t.jsx)("label",{htmlFor:"servicePic",children:(0,t.jsx)(U.Z,{src:!a||g?g:"data:image/jpeg;base64,".concat(null==a?void 0:a.servicePic),sx:{width:100,height:100,cursor:"pointer",mt:"10px"},variant:"rounded"})})]}),(0,t.jsx)(Z.Z,{label:"Title",fullWidth:!0,margin:"normal",...l("title",{required:"Title is required"}),error:!!f.title,helperText:f.title?f.title.message:""}),(0,t.jsx)(Z.Z,{label:"Description",fullWidth:!0,margin:"normal",...l("description",{required:"Description is required"}),error:!!f.description,helperText:f.description?f.description.message:""}),(0,t.jsx)(Z.Z,{label:"Price",fullWidth:!0,margin:"normal",type:"number",...l("price",{required:"Price is required"}),error:!!f.price,helperText:f.price?f.price.message:""}),(0,t.jsx)(u.Z,{type:"submit",variant:"contained",color:"primary",sx:{marginTop:"20px"},disabled:B,children:a?"Update Service":"Add Service"})]})]})})}function H(e){let{isLoading:r,user:i}=e,[a,m]=s.useState(!1),[x,h]=s.useState(null),f=()=>m(!0),g=(0,o.I0)(),b=(0,o.v9)(e=>e.user.services),j=e=>{h(e),f()};return((0,s.useEffect)(()=>{i&&g((0,n.Qz)())},[i]),r)?(0,t.jsx)(l.Z,{}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(d.Z,{style:{paddingTop:"30px",paddingBottom:"30px"},maxWidth:"2xl",children:[(0,t.jsx)(c.Z,{display:"flex",justifyContent:"end",mb:"20px",children:(0,t.jsx)(u.Z,{variant:"contained",onClick:f,children:"Add Service"})}),(0,t.jsx)(Q,{open:a,handleClose:()=>{h(null),m(!1)},handleOpen:f,service:x}),(0,t.jsx)(v.Z,{variant:"h4",marginBottom:"20px",children:"Services"}),(null==x?void 0:x.length)===0&&(0,t.jsx)(c.Z,{children:"No Service"}),(0,t.jsx)(p.ZP,{container:!0,spacing:4,children:null==b?void 0:b.map(e=>(0,t.jsx)(_,{service:e,handlerEditService:j},e.id))})]})})}function $(){let e=(0,o.I0)(),r=(0,o.v9)(e=>e.user.isLoading),i=(0,o.v9)(e=>e.user.error),d=(0,o.v9)(e=>e.user.user);return((0,s.useEffect)(()=>{d||e((0,n.BT)())},[d]),r&&!d)?(0,t.jsx)(l.Z,{}):i?(0,t.jsx)(t.Fragment,{children:i}):(0,t.jsxs)(s.Fragment,{children:[(0,t.jsx)(a.Z,{user:d}),(null==d?void 0:d.role)==="admin"&&(0,t.jsx)(N,{isLoading:r,user:d}),(null==d?void 0:d.role)==="user"&&(0,t.jsx)(k,{isLoading:r,user:d}),(null==d?void 0:d.role)==="barber"&&(0,t.jsx)(H,{isLoading:r,user:d})]})}},3385:function(){}},function(e){e.O(0,[470,565,688,174,181,546,298,508,929,747,971,69,744],function(){return e(e.s=7782)}),_N_E=e.O()}]);