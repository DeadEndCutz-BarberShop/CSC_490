(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},2181:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},8019:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=t(482),i=t(9108),a=t(2563),n=t.n(a),o=t(8300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6931)),"C:\\Users\\masad\\OneDrive\\Desktop\\barbershop-app\\src\\app\\page.js"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,5848)),"C:\\Users\\masad\\OneDrive\\Desktop\\barbershop-app\\src\\app\\layout.js"],loading:[()=>Promise.resolve().then(t.bind(t,4496)),"C:\\Users\\masad\\OneDrive\\Desktop\\barbershop-app\\src\\app\\loading.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\masad\\OneDrive\\Desktop\\barbershop-app\\src\\app\\page.js"],p="/page",u={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1148:(e,r,t)=>{Promise.resolve().then(t.bind(t,5357)),Promise.resolve().then(t.bind(t,8614))},4634:(e,r,t)=>{"use strict";var s=t(9286);r.Z=void 0;var i=s(t(389)),a=t(5344);r.Z=(0,i.default)((0,a.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn")},9251:(e,r,t)=>{"use strict";t.d(r,{Z:()=>b});var s=t(1848),i=t(5651),a=t(3729),n=t(6815),o=t(5599),l=t(3139),d=t(9448),c=t(9927),p=t(7895);function u(e){return(0,p.ZP)("MuiCardMedia",e)}(0,c.Z)("MuiCardMedia",["root","media","img"]);var m=t(5344);let x=["children","className","component","image","src","style"],h=e=>{let{classes:r,isMediaComponent:t,isImageComponent:s}=e;return(0,o.Z)({root:["root",t&&"media",s&&"img"]},u,r)},g=(0,d.ZP)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e,{isMediaComponent:s,isImageComponent:i}=t;return[r.root,s&&r.media,i&&r.img]}})(({ownerState:e})=>(0,i.Z)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},e.isMediaComponent&&{width:"100%"},e.isImageComponent&&{objectFit:"cover"})),f=["video","audio","picture","iframe","img"],v=["picture","img"],b=a.forwardRef(function(e,r){let t=(0,l.Z)({props:e,name:"MuiCardMedia"}),{children:a,className:o,component:d="div",image:c,src:p,style:u}=t,b=(0,s.Z)(t,x),j=-1!==f.indexOf(d),Z=!j&&c?(0,i.Z)({backgroundImage:`url("${c}")`},u):u,y=(0,i.Z)({},t,{component:d,isMediaComponent:j,isImageComponent:-1!==v.indexOf(d)}),P=h(y);return(0,m.jsx)(g,(0,i.Z)({className:(0,n.Z)(P.root,o),as:d,role:!j&&c?"img":void 0,ref:r,style:Z,ownerState:y,src:j?c||p:void 0},b,{children:a}))})},4473:(e,r,t)=>{"use strict";t.d(r,{B:()=>i});var s=t(8671);let i=(e,r)=>(0,s.toast)(e,{type:r,position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!0,theme:"light",transition:s.Bounce})},8614:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>X});var s=t(5344),i=t(3729),a=t.n(i),n=t(1214),o=t(5555),l=t(6013),d=t(5862),c=t(2663),p=t(4359),u=t(5183),m=t(3472),x=t(2742),h=t(9251),g=t(8154),f=t(5442);t(7329);var v=t(4634),b=t(6506);function j({barber:e}){return s.jsx(m.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:s.jsx(p.Z,{m:1,position:"relative",children:(0,s.jsxs)(x.Z,{component:b.default,href:`barber/${e.id}`,sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.3s ease-in-out",textDecoration:"none",cursor:"pointer","&:hover":{transform:"scale(1.05)"},":active":{transform:"scale(0.90)"}},children:[e?.profilePic?s.jsx(h.Z,{style:{paddingTop:"56.25%"},title:"Barber's Profile Picture",image:`data:image/jpeg;base64,${e.profilePic}`,sx:{backgroundSize:"contain"}}):s.jsx(h.Z,{style:{paddingTop:"56.25%"},title:"Default Profile Icon",image:"./dummyuser.png",sx:{backgroundSize:"contain"}}),(0,s.jsxs)(g.Z,{style:{flexGrow:1},children:[(0,s.jsxs)(f.Z,{gutterBottom:!0,variant:"h5",component:"h2",children:[e?.firstName||"Barber"," ",e?.lastName]}),(0,s.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",gap:"5px",mt:"10px"},children:[s.jsx(v.Z,{}),s.jsx(p.Z,{sx:{fontWeight:400,fontSize:"14px",mt:"3px",textTransform:"uppercase"},children:e?.location||"Not Set"})]})]})]})})})}var Z=t(708),y=t(6147),P=t(9232);t(8671);var S=t(3608),C=t(905),q=t(4473);let k={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"100%",sm:500,md:600},height:{xs:"100%",sm:"auto"},bgcolor:"background.paper",border:"1px solid #000",boxShadow:24,p:4};function w({open:e,handleClose:r}){let{register:t,handleSubmit:i,reset:n,setError:d,formState:{errors:c}}=(0,Z.cI)(),[m,x]=a().useState(!1),h=(0,l.I0)(),g=async e=>{x(!0);let t=(0,C.e)("access_token");try{let s=await S.Z.post("http://localhost:4000/auth/add-barber",e,{headers:{Authorization:`Bearer ${t}`}});(0,q.B)(s?.data?.message||"Barber added successfully","success"),n(),r(),h((0,o.d1)())}catch(e){if(e.response&&401===e.response.status){let r=e?.response?.data?.message||"Unauthorized";"Barber already exists"===r&&((0,q.B)("Barber already exists","error"),d("email",{type:"custom",message:r}))}else(0,q.B)(e?.response?.data?.message,"error")}finally{x(!1)}};return s.jsx(P.Z,{open:e,onClose:r,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,s.jsxs)(p.Z,{sx:k,children:[s.jsx(f.Z,{variant:"h5",children:"Create Barber"}),s.jsx(p.Z,{fontSize:"26px",position:"absolute",top:"20px",right:"20px",onClick:r,sx:{cursor:"pointer"},children:"x"}),(0,s.jsxs)("form",{onSubmit:i(g),children:[s.jsx(y.Z,{...t("firstName",{required:"First Name is required"}),autoComplete:"given-name",name:"firstName",fullWidth:!0,type:"text",label:"First Name",autoFocus:!0,error:!!c.firstName,helperText:c.firstName?c.firstName.message:"",sx:{mt:2}}),s.jsx(y.Z,{...t("lastName",{required:"Last Name is required"}),fullWidth:!0,type:"text",label:"Last Name",name:"lastName",error:!!c.lastName,helperText:c.lastName?c.lastName.message:"",sx:{mt:2}}),s.jsx(y.Z,{label:"Email",type:"email",fullWidth:!0,margin:"normal",...t("email",{required:"Email is required"}),error:!!c.email,helperText:c.email?c.email.message:""}),s.jsx(y.Z,{label:"Password",fullWidth:!0,margin:"normal",type:"password",...t("password",{minLength:{value:6,message:"Password must be at least 6 characters long"},required:"Password is required"}),error:!!c.password,helperText:c.password?c.password.message:""}),s.jsx(u.Z,{type:"submit",variant:"contained",color:"primary",sx:{marginTop:"20px"},disabled:m,children:"Add Barber"})]})]})})}function B({isLoading:e,user:r}){let[t,n]=a().useState(!1),x=()=>n(!0),h=(0,l.I0)(),g=(0,l.v9)(e=>e.user.barbers);return((0,i.useEffect)(()=>{r&&h((0,o.d1)())},[r]),e)?s.jsx(d.Z,{}):s.jsx(s.Fragment,{children:(0,s.jsxs)(c.Z,{style:{paddingTop:"64px",paddingBottom:"64px"},maxWidth:"2xl",children:[s.jsx(p.Z,{display:"flex",justifyContent:"end",mb:"20px",children:s.jsx(u.Z,{variant:"contained",onClick:x,children:"Create Barber"})}),s.jsx(w,{open:t,handleClose:()=>n(!1),handleOpen:x}),s.jsx(m.ZP,{container:!0,spacing:4,children:g?.map(e=>s.jsx(j,{barber:e},e.id))})]})})}function T({isLoading:e,user:r}){let[t,n]=a().useState(!1),p=(0,l.I0)(),u=(0,l.v9)(e=>e.user.barbers);return((0,i.useEffect)(()=>{r&&p((0,o.d1)())},[r]),e)?s.jsx(d.Z,{}):s.jsx(s.Fragment,{children:(0,s.jsxs)(c.Z,{style:{paddingTop:"64px",paddingBottom:"64px"},maxWidth:"2xl",children:[s.jsx(w,{open:t,handleClose:()=>n(!1),handleOpen:()=>n(!0)}),s.jsx(m.ZP,{container:!0,spacing:4,children:u?.map(e=>s.jsx(j,{barber:e},e.id))})]})})}var N=t(1848),D=t(5651),z=t(6815),_=t(5599),E=t(9448),M=t(3139),A=t(9927),I=t(7895);function O(e){return(0,I.ZP)("MuiCardActions",e)}(0,A.Z)("MuiCardActions",["root","spacing"]);let W=["disableSpacing","className"],$=e=>{let{classes:r,disableSpacing:t}=e;return(0,_.Z)({root:["root",!t&&"spacing"]},O,r)},F=(0,E.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,!t.disableSpacing&&r.spacing]}})(({ownerState:e})=>(0,D.Z)({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),L=i.forwardRef(function(e,r){let t=(0,M.Z)({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:a}=t,n=(0,N.Z)(t,W),o=(0,D.Z)({},t,{disableSpacing:i}),l=$(o);return(0,s.jsx)(F,(0,D.Z)({className:(0,z.Z)(l.root,a),ownerState:o,ref:r},n))});function R({service:e,handlerEditService:r}){return s.jsx(m.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:s.jsx(p.Z,{m:1,position:"relative",children:(0,s.jsxs)(x.Z,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.3s ease-in-out",textDecoration:"none",cursor:"pointer","&:hover":{transform:"scale(1.05)"}},children:[e?.servicePic?s.jsx(h.Z,{style:{paddingTop:"56.25%"},title:"Barber's Profile Picture",image:`data:image/jpeg;base64,${e.servicePic}`,sx:{backgroundSize:"cover"}}):s.jsx(h.Z,{style:{paddingTop:"56.25%"},title:"Default Profile Icon",image:"./dummyuser.png",sx:{backgroundSize:"contain"}}),(0,s.jsxs)(g.Z,{style:{flexGrow:1},children:[s.jsx(f.Z,{gutterBottom:!0,variant:"h5",component:"h2",children:e?.title}),s.jsx(p.Z,{sx:{fontWeight:400,fontSize:"14px",mt:"3px",textTransform:"uppercase"},children:e?.description}),(0,s.jsxs)(p.Z,{sx:{fontWeight:400,fontSize:"14px",mt:"3px",textTransform:"uppercase"},children:["$",e?.price]})]}),s.jsx(L,{children:s.jsx(u.Z,{size:"small",color:"primary",onClick:()=>{r(e)},children:"Edit"})})]})})})}var U=t(8166);let G={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"100%",sm:500,md:600},height:{xs:"100%",sm:"auto"},bgcolor:"background.paper",border:"1px solid #000",boxShadow:24,p:4};function H({open:e,handleClose:r,service:t}){let{register:i,handleSubmit:n,reset:d,setError:c,watch:m,setValue:x,formState:{errors:h}}=(0,Z.cI)({}),[g,v]=a().useState(null),[b,j]=a().useState(!1),k="http://localhost:4000",w=(0,l.I0)(),B=m("servicePic");a().useEffect(()=>{t?Object.keys(t).forEach(e=>{void 0!==t[e]&&"id"!==e&&"servicePic"!==e&&x(e,t[e])}):(x("title",""),x("description",""),x("price",""))},[t]),a().useEffect(()=>{if(B?.length){let e=new FileReader;e.onloadend=()=>{v(e.result)},e.readAsDataURL(B[0])}else v(null)},[B]);let T=async e=>{j(!0);let s=(0,C.e)("access_token"),i=`${k}/services/add-service`,a="Service added successfully",n=new FormData;n.append("servicePic",e?.servicePic[0]),t&&(i=`${k}/services/update-service/${t.id}`,a="Service updated successfully");try{let t=await S.Z.post(i,{...e,price:parseInt(e?.price)},{headers:{Authorization:`Bearer ${s}`}});n.append("service_id",t?.data?.id),e?.servicePic[0]&&await S.Z.post(`${k}/services/update/service-pic`,n,{headers:{Authorization:`Bearer ${s}`}}),(0,q.B)(t.data.message||a,"success"),d(),r(),w((0,o.Qz)())}catch(r){let e=r?.response?.data?.message||"Error";(0,q.B)(e,"error")}finally{j(!1)}};return s.jsx(P.Z,{open:e,onClose:r,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,s.jsxs)(p.Z,{sx:G,children:[s.jsx(f.Z,{variant:"h5",children:t?"Edit Service":"Add Service"}),s.jsx(p.Z,{fontSize:"26px",position:"absolute",top:"20px",right:"20px",onClick:r,sx:{cursor:"pointer"},children:"x"}),(0,s.jsxs)("form",{onSubmit:n(T),children:[s.jsx(f.Z,{variant:"body1",fontWeight:500,mt:"15px",children:"Service picture:"}),(0,s.jsxs)(p.Z,{sx:{position:"relative",marginBottom:1},children:[s.jsx("input",{type:"file",...i("servicePic",{}),accept:"image/*",style:{display:"none"},id:"servicePic"}),s.jsx("label",{htmlFor:"servicePic",children:s.jsx(U.Z,{src:!t||g?g:`data:image/jpeg;base64,${t?.servicePic}`,sx:{width:100,height:100,cursor:"pointer",mt:"10px"},variant:"rounded"})})]}),s.jsx(y.Z,{label:"Title",fullWidth:!0,margin:"normal",...i("title",{required:"Title is required"}),error:!!h.title,helperText:h.title?h.title.message:""}),s.jsx(y.Z,{label:"Description",fullWidth:!0,margin:"normal",...i("description",{required:"Description is required"}),error:!!h.description,helperText:h.description?h.description.message:""}),s.jsx(y.Z,{label:"Price",fullWidth:!0,margin:"normal",type:"number",...i("price",{required:"Price is required"}),error:!!h.price,helperText:h.price?h.price.message:""}),s.jsx(u.Z,{type:"submit",variant:"contained",color:"primary",sx:{marginTop:"20px"},disabled:b,children:t?"Update Service":"Add Service"})]})]})})}function Q({isLoading:e,user:r}){let[t,n]=a().useState(!1),[x,h]=a().useState(null),g=()=>n(!0),v=(0,l.I0)(),b=(0,l.v9)(e=>e.user.services),j=e=>{h(e),g()};return((0,i.useEffect)(()=>{r&&v((0,o.Qz)())},[r]),e)?s.jsx(d.Z,{}):s.jsx(s.Fragment,{children:(0,s.jsxs)(c.Z,{style:{paddingTop:"30px",paddingBottom:"30px"},maxWidth:"2xl",children:[s.jsx(p.Z,{display:"flex",justifyContent:"end",mb:"20px",children:s.jsx(u.Z,{variant:"contained",onClick:g,children:"Add Service"})}),s.jsx(H,{open:t,handleClose:()=>{h(null),n(!1)},handleOpen:g,service:x}),s.jsx(f.Z,{variant:"h4",marginBottom:"20px",children:"Services"}),x?.length===0&&s.jsx(p.Z,{children:"No Service"}),s.jsx(m.ZP,{container:!0,spacing:4,children:b?.map(e=>s.jsx(R,{service:e,handlerEditService:j},e.id))})]})})}function X(){let e=(0,l.I0)(),r=(0,l.v9)(e=>e.user.isLoading),t=(0,l.v9)(e=>e.user.error),c=(0,l.v9)(e=>e.user.user);return((0,i.useEffect)(()=>{c||e((0,o.BT)())},[c]),r&&!c)?s.jsx(d.Z,{}):t?s.jsx(s.Fragment,{children:t}):(0,s.jsxs)(a().Fragment,{children:[s.jsx(n.Z,{user:c}),c?.role==="admin"&&s.jsx(B,{isLoading:r,user:c}),c?.role==="user"&&s.jsx(T,{isLoading:r,user:c}),c?.role==="barber"&&s.jsx(Q,{isLoading:r,user:c})]})}},6931:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var s=t(5036);t(2);var i=t(5147),a=t.n(i);t(5023);let n=(0,t(6843).createProxy)(String.raw`C:\Users\masad\OneDrive\Desktop\barbershop-app\src\app\Components\Home\Home.js`),{__esModule:o,$$typeof:l}=n,d=n.default;function c(){return s.jsx(a(),{children:s.jsx(d,{})})}},5023:()=>{}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[510,333,370,484,472,308,601],()=>t(8019));module.exports=s})();